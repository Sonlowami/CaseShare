{% extends 'layout.html' %}
{% block title %} CaseShare | Register {% endblock %}
{% block body %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">

        function check_title() {
	        const pattern = /^[a-zA-Z]*$/;
	        const title = $("#title").val();
	        if (pattern.test(title) && title !== "") {
		        $("#title_error_message").hide();
		        $("#title").css("border-bottom","2px solid #34F458");
	        } else {
		        $("#title_error_message").html("Should contain only Characters");
		        $("#title_error_message").show();
		        $("#title").css("border-bottom","2px solid #F90A0A");
		        error_title = true;
	        }
	    } 
	    

        function check_email() {
            const pattern = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            const email = $("#email").val();
            if (pattern.test(email) && email !== "") {
                $("#email_error_message").hide();
                $("#email").css("border-bottom","2px solid #34F458");
            } else {
                $("#email_error_massage").html("Invalid Email");
                $("#email_error_massage").show();
                $("#email").css("border-bottom","2px solid #F90A0A");
                error_email = true;
            }
        }

        function check_password() {
            const password_length = $("#password").val().length;
            if (password_length < 8) {
                $("#password_error_message").html("Atleast 8 Characters");
                $("#password_error_message").show();
                $("#password").css("border-bottom","2px solid #F90A0A");
                error_password = true;
            } else {
                $("#password_error_message").hide();
                $("#password").css("border-bottom","2px solid #34F458");
            }
        }

        function check_confirm_password() {
            const password = $("#password").val();
            const confirm_password = $("#confirm_password").val();
            if (password != confirm_password) {
                $("#confirm_password_error_message").html("Passwords Do Not Match");
                $("#confirm_password_error_message").show();
                $("#confirm_password").css("border-bottm","2px solid #F90A0A");
                error_confirm_password = true;
            } else {
                $("#confirm_password_error_message").hide();
                $("#confirm_password").css("border-bottom","2px solid #34F458");
            }
        }    

        function validatephone(mobile_number) {
		    mobile_number = mobile_number.replace(/[^0-9]/g,"");
		    $("#phone").val(mobile_number);
		    if(mobile_number == "" || !mobile_number.match(/^0[0-9]{9}$/)) {
				$("#phone").css({"background":"#FFEDEF","border":"solid 1px red"});
				return false;
			} else {
				$("#phone").css({"background":"#99FF99","border":"solid 1px #99FF99"});
				return true;
			}               
        }

        const error_email = false;
        const error_password = false;
        const error_confirm_password = false;
	    const error_phone = false;
        const error_title = false;

        $(function() {

        $("#email_error_message").hide();
        $("#password_error_message").hide();
        $("#confirm_password_error_message").hide();
        $("#phone_error_message").hide();
        $("#title_error_message").hide();

        $("#email").focusout(function() {
            check_email();
        });
        $("#password").focusout(function() {
            check_password();
        });
        $("#confirm_password").focusout(function() {
            check_confirm_password();
        });
        $("#phone").focusout(function() {
            validatephone();
        });
        $("#title").focusout(function() {
            check_title();
        });
    
        $("#main-container").submit(function() {
            error_email = false;
            error_password = false;
            error_confirm_password = false;
	        error_phone = false;
            error_title = false;

            check_email();
            check_password();
            check_confirm_password();
	        validatephone();
            check_title();

            if (error_email === false && error_password === false && error_confirm_password === false && error_phone === false && error_title === false) {
                alert("Registration Successfull");
                return true;
            } else {
                alert("Please Fill the form Correctly");
                return false;

            }
        });
    });
    </script>
    <div id="main-container" class="container mt-5">
        <div class="row justify-content-center align-items-end">
            <div class="col-12 col-lg-6 form1">
                <h3>Create an Account for Free</h3>
                <p>Sign up today for a better experience</p>
                <form class="form" id="registerForm">
                    <div class="form-group py-2">
                        <label for="email">Email</label>
                        <input type="email" id="email" required placeholder="Enter email" class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="password">Password</label>
                        <input type="password" id="password" required placeholder="Create Password" class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="comfirmPassword">Confirm Password</label>
                        <input type="password" id="comfirmPassword" required placeholder="Password" class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="first_name">First Name</label>
                        <input type="text" required placeholder="First Name" id="first_name" class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="last_name">Last Name</label>
                        <input type="text" required placeholder="Last Name" id="last_name" class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="phone">Mobile Number</label>
                        <input type="number" required placeholder="+ (xxx) xxx xxx xxx" id="phone" class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="title">Title</label>
                        <input type="text" placeholder="Ex: Radiographer at xyz Hospital" required id="title" class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="country">Country</label>
                        <input type="text" id="country" required placeholder='......' class="form-control">
                    </div>
                    <div class="form-group py-2">
                        <label for="age">Age</label>
                        <input type="number" id="age" required placeholder="0" class="form-control">
                    </div>
                    <div class="py-3">
                        <button class="btn btn-sm btn-success" type="submit" id="register">Create Account</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
{% endblock %}
