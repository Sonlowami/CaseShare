{% extends 'layout.html' %}
{% block title %} CaseShare | Register {% endblock %}
{% block body %}
    <script type="text/javascript">

        function check_title() {
	        var pattern = /^[a-zA-Z]*$/;
	        var title = $("#title").val();
	        if (pattern.test(title) && title !== "") {
		        $("#title_error_message").hide();
		        $("#title").css("border-bottom","2px solid #34F458");
	        } else {
		        $("#title_error_message").html("Should contain only Characters");
		        $("#title_error_message").show();
		        $("#title").css("border-bottom","2px solid #F90A0A");
		        error_title = true;
	        }
	    } 
	    

        function check_email() {
            var pattern = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            var email = $("#email").val();
            if (pattern.test(email) && email !== "") {
                $("#email_error_message").hide();
                $("#email").css("border-bottom","2px solid #34F458");
            } else {
                $("#email_error_massage").html("Invalid Email");
                $("#email_error_massage").show();
                $("#email").css("border-bottom","2px solid #F90A0A");
                error_email = true;
            }
        }

        function check_password() {
            var password_length = $("#password").val().length;
            if (password_length < 8) {
                $("#password_error_message").html("Atleast 8 Characters");
                $("#password_error_message").show();
                $("#password").css("border-bottom","2px solid #F90A0A");
                error_password = true;
            } else {
                $("#password_error_message").hide();
                $("#password").css("border-bottom","2px solid #34F458");
            }
        }

        function check_confirm_password() {
            var password = $("#password").val();
            var confirm_password = $("#confirm_password").val();
            if (password != confirm_password) {
                $("#confirm_password_error_message").html("Passwords Do Not Match");
                $("#confirm_password_error_message").show();
                $("#confirm_password").css("border-bottm","2px solid #F90A0A");
                error_confirm_password = true;
            } else {
                $("#confirm_password_error_message").hide();
                $("#confirm_password").css("border-bottom","2px solid #34F458");
            }
        }    

        function validatephone(mobile_number) {
		    mobile_number = mobile_number.replace(/[^0-9]/g,"");
		    $("#phone").val(mobile_number);
		    if(mobile_number == "" || !mobile_number.match(/^0[0-9]{9}$/)) {
				$("#phone").css({"background":"#FFEDEF","border":"solid 1px red"});
				return false;
			} else {
				$("#phone").css({"background":"#99FF99","border":"solid 1px #99FF99"});
				return true;
			}               
        }

        var error_email = false;
        var error_password = false;
        var error_confirm_password = false;
	    var error_phone = false;
        var error_title = false;

        $(function() {

        $("#email_error_message").hide();
        $("#password_error_message").hide();
        $("#confirm_password_error_message").hide();
        $("#phone_error_message").hide();
        $("#title_error_message").hide();

        $("#email").focusout(function() {
            check_email();
        });
        $("#password").focusout(function() {
            check_password();
        });
        $("#confirm_password").focusout(function() {
            check_confirm_password();
        });
        $("#phone").focusout(function() {
            validatephone();
        });
        $("#title").focusout(function() {
            check_title();
        });
    
        $("#main-container").submit(function() {
            error_email = false;
            error_password = false;
            error_confirm_password = false;
	        error_phone = false;
            error_title = false;

            check_email();
            check_password();
            check_confirm_password();
	        validatephone();
            check_title();

            if (error_email === false && error_password === false && error_confirm_password === false && error_phone === false && error_title === false) {
                alert("Registration Successfull");
                return true;
            } else {
                alert("Please Fill the form Correctly");
                return false;

            }
        });
    });
    </script>
    <body class="d-flex flex-column h-100">
            <div id="main-container" class="container mt-5">
                <div class="row justify-content-center align-items-end">
                    <div class="col-12 col-lg-6 form1">
                        <h3>Create an Account for Free</h3>
                        <p>Sign up today for a better experience</p>
                        <form>
                            <div class="form-group py-2">
                                <label for="email">Email</label>
                                <input type="email" id="email" required placeholder="Enter email" class="form-control">
                                <span class="error_form" id="email_error_message"></span> 
                            </div>
                            <div class="form-group py-2">
                                <label for="password">Password</label>
                                <input type="password" id="password" required placeholder="Create Password" class="form-control">
                                <span class="error_form" id="password_error_message"></span>
                            </div>
                            <div class="form-group py-2">
                                <label for="password">Confirm Password</label>
                                <input type="password" id="confirm_password" required placeholder="Password" class="form-control">
                                <span class="error_form" id="confirm_password_error_message"></span>
                            </div>
                            <div class="form-group py-2">
                                <label for="phone">Mobile Number</label>
                                <input type="number" placeholder="+ (xxx) xxx xxx xxx" id="phone" name="mobile_number" class="form-control" onkeyup=" return validatephone(this.value);" />
                                <span class="error_form" id="phone_error_message"></span>
                            </div>
                            <div class="form-group py-2">
                                <label for="title">Title</label>
                                <input type="text" placeholder="Ex: Radiographer at xyz Hospital" id="title" class="form-control">
                                <span class="error_form" id="title_error_message"></span> 
                            </div>
                            
                            <button type="button" class="btn btn-info"><a href="index">Create Account</a></button><div class="py-3">           
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>
{% endblock %}
